---
upstreams:
  groups:
    default:
      - &quad9_tls tcp-tls:dns.quad9.net
bootstrapDns:
  - upstream: *quad9_tls
    ips:
      - 9.9.9.9
      - 149.112.112.112
      - 2620:fe::fe
      - 2620:fe::9
conditional:
  fallbackUpstream: false
  mapping:
    fritz.box: 192.168.178.1
    178.168.192.in-addr.arpa: 192.168.178.1
clientLookup:
  upstream: 192.168.178.1
blocking:
  denylists:
    ads:
      - https://big.oisd.nl/domainswild
      - https://raw.githubusercontent.com/hagezi/dns-blocklists/main/wildcard/pro.txt
    malware:
      - https://raw.githubusercontent.com/hagezi/dns-blocklists/main/wildcard/doh.txt
      - https://raw.githubusercontent.com/hagezi/dns-blocklists/main/wildcard/tif.txt
  clientGroupsBlock:
    default:
      - ads
      - malware
customDNS:
  mapping:
    ${CLUSTER_DOMAIN}: "${PROXY_IP},${PROXY_IPv6}"
caching:
  maxItemsCount: 10_000
  minTime: 15m
  maxTime: 4h
  prefetching: true
  cacheTimeNegative: 15s
redis:
  address: redis://dragonfly.database.svc.cluster.local:6379/1
prometheus:
  enable: true
ports:
  http: 4000
